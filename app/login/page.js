(()=>{var e={};e.id=2626,e.ids=[2626],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6005:e=>{"use strict";e.exports=require("node:crypto")},56578:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(59758),r(83421),r(85673);var s=r(41118),a=r(20515),n=r(17412),l=r.n(n),i=r(35078),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59758)),"/app/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83421)),"/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,85673,23)),"next/dist/client/components/not-found-error"]}],c=["/app/src/app/login/page.tsx"],u="/login/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},86676:(e,t,r)=>{Promise.resolve().then(r.bind(r,75099))},8906:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(73301);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:i="",children:o,iconNode:d,...c},u)=>(0,s.createElement)("svg",{ref:u,...l,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:n("lucide",i),...c},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...l},o)=>(0,s.createElement)(i,{ref:o,iconNode:t,className:n(`lucide-${a(e)}`,r),...l}));return r.displayName=`${e}`,r}},17155:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8906).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},80606:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8906).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},78747:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8906).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},18202:(e,t,r)=>{"use strict";var s=r(57708);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},75099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(19681);let a=(0,r(8906).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var n=r(17155),l=r(18202),i=r(73301),o=r(46768),d=r(30045),c=r(72687),u=r(97214);function p(){let[e,t]=(0,i.useState)(null),[r,l]=(0,i.useState)(!0);return(0,s.jsxs)("button",{onClick:()=>window.open("https://github.com/MoonTechLab/LunaTV","_blank"),className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 transition-colors cursor-pointer",children:[(0,s.jsxs)("span",{className:"font-mono",children:["v",o.w]}),!r&&e!==d.qu.FETCH_FAILED&&(0,s.jsxs)("div",{className:`flex items-center gap-1.5 ${e===d.qu.HAS_UPDATE?"text-yellow-600 dark:text-yellow-400":e===d.qu.NO_UPDATE?"text-green-600 dark:text-green-400":""}`,children:[e===d.qu.HAS_UPDATE&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(a,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-semibold text-xs",children:"有新版本"})]}),e===d.qu.NO_UPDATE&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-semibold text-xs",children:"已是最新"})]})]})]})}function x(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),[r,a]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[d,x]=(0,i.useState)(null),[h,m]=(0,i.useState)(!1),[g,b]=(0,i.useState)(!1),[y,f]=(0,i.useState)(!1),{siteName:w}=(0,c.W)(),k=async s=>{if(s.preventDefault(),x(null),r&&(!g||n))try{m(!0);let s=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,...g?{username:n}:{}})});if(s.ok){let r=t.get("redirect")||"/";e.replace(r)}else if(401===s.status)x("密码错误");else{let e=await s.json().catch(()=>({}));x(e.error??"服务器错误")}}catch(e){x("网络错误，请稍后重试")}finally{m(!1)}},j=async()=>{if(x(null),r&&n)try{m(!0);let s=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:r})});if(s.ok){let r=t.get("redirect")||"/";e.replace(r)}else{let e=await s.json().catch(()=>({}));x(e.error??"服务器错误")}}catch(e){x("网络错误，请稍后重试")}finally{m(!1)}};return(0,s.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center px-4 overflow-hidden",children:[s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(u.T,{})}),(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-md rounded-3xl bg-gradient-to-b from-white/90 via-white/70 to-white/40 dark:from-zinc-900/90 dark:via-zinc-900/70 dark:to-zinc-900/40 backdrop-blur-xl shadow-2xl p-10 dark:border dark:border-zinc-800",children:[s.jsx("h1",{className:"text-green-600 tracking-tight text-center text-3xl font-extrabold mb-8 bg-clip-text drop-shadow-sm",children:w}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-8",children:[g&&(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"username",className:"sr-only",children:"用户名"}),s.jsx("input",{id:"username",type:"text",autoComplete:"username",className:"block w-full rounded-lg border-0 py-3 px-4 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-white/60 dark:ring-white/20 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:ring-2 focus:ring-green-500 focus:outline-none sm:text-base bg-white/60 dark:bg-zinc-800/60 backdrop-blur",placeholder:"输入用户名",value:n,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"密码"}),s.jsx("input",{id:"password",type:"password",autoComplete:"current-password",className:"block w-full rounded-lg border-0 py-3 px-4 text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-white/60 dark:ring-white/20 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:ring-2 focus:ring-green-500 focus:outline-none sm:text-base bg-white/60 dark:bg-zinc-800/60 backdrop-blur",placeholder:"输入访问密码",value:r,onChange:e=>a(e.target.value)})]}),d&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:d}),g&&y?(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:j,disabled:!r||!n||h,className:"flex-1 inline-flex justify-center rounded-lg bg-blue-600 py-3 text-base font-semibold text-white shadow-lg transition-all duration-200 hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:h?"注册中...":"注册"}),s.jsx("button",{type:"submit",disabled:!r||h||g&&!n,className:"flex-1 inline-flex justify-center rounded-lg bg-green-600 py-3 text-base font-semibold text-white shadow-lg transition-all duration-200 hover:from-green-600 hover:to-blue-600 disabled:cursor-not-allowed disabled:opacity-50",children:h?"登录中...":"登录"})]}):s.jsx("button",{type:"submit",disabled:!r||h||g&&!n,className:"inline-flex w-full justify-center rounded-lg bg-green-600 py-3 text-base font-semibold text-white shadow-lg transition-all duration-200 hover:from-green-600 hover:to-blue-600 disabled:cursor-not-allowed disabled:opacity-50",children:h?"登录中...":"登录"})]})]}),s.jsx(p,{})]})}function h(){return s.jsx(i.Suspense,{fallback:s.jsx("div",{children:"Loading..."}),children:s.jsx(x,{})})}},59758:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(15761).createProxy)(String.raw`/app/src/app/login/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7796,9864,6981,5737,9535],()=>r(56578));module.exports=s})();