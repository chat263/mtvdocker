"use strict";(()=>{var e={};e.id=8538,e.ids=[8538],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91527:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>u,runtime:()=>p});var s=r(4762),o=r(20515),n=r(4894),i=r(40379);let p="nodejs";async function u(e){let{searchParams:t}=new URL(e.url),r=t.get("url");if(!r)return i.NextResponse.json({error:"Missing image URL"},{status:400});try{let e=await fetch(r,{headers:{Referer:"https://movie.douban.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"}});if(!e.ok)return i.NextResponse.json({error:e.statusText},{status:e.status});let t=e.headers.get("content-type");if(!e.body)return i.NextResponse.json({error:"Image response has no body"},{status:500});let a=new Headers;return t&&a.set("Content-Type",t),a.set("Cache-Control","public, max-age=15720000, s-maxage=15720000"),a.set("CDN-Cache-Control","public, s-maxage=15720000"),a.set("Vercel-CDN-Cache-Control","public, s-maxage=15720000"),a.set("Netlify-Vary","query"),new Response(e.body,{status:200,headers:a})}catch(e){return i.NextResponse.json({error:"Error fetching image"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/image-proxy/route",pathname:"/api/image-proxy",filename:"route",bundlePath:"app/api/image-proxy/route"},resolvedPagePath:"/app/src/app/api/image-proxy/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:m}=l,g="/api/image-proxy/route";function x(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7796,3001],()=>r(91527));module.exports=a})();