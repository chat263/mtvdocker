"use strict";(()=>{var e={};e.id=9551,e.ids=[9551],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},97927:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l});var n={};r.r(n),r.d(n,{POST:()=>c});var s=r(4762),o=r(20515),a=r(4894),i=r(40379),u=r(46307);async function c(e){try{let t;let n=(0,u.l)(e);if(!n||!n.username)return i.NextResponse.json({error:"Unauthorized"},{status:401});if(n.username!==process.env.USERNAME)return i.NextResponse.json({error:"权限不足，只有站长可以拉取配置订阅"},{status:401});let{url:s}=await e.json();if(!s)return i.NextResponse.json({error:"缺少URL参数"},{status:400});let o=await fetch(s);if(!o.ok)return i.NextResponse.json({error:`请求失败: ${o.status} ${o.statusText}`},{status:o.status});let a=await o.text();try{let e=(await r.e(7818).then(r.bind(r,27818))).default.decode(a);t=new TextDecoder().decode(e)}catch(e){throw console.warn("Base58 解码失败",e),e}return i.NextResponse.json({success:!0,configContent:t,message:"配置拉取成功"})}catch(e){return console.error("拉取配置失败:",e),i.NextResponse.json({error:"拉取配置失败"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/config_subscription/fetch/route",pathname:"/api/admin/config_subscription/fetch",filename:"route",bundlePath:"app/api/admin/config_subscription/fetch/route"},resolvedPagePath:"/app/src/app/api/admin/config_subscription/fetch/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:f}=p,h="/api/admin/config_subscription/fetch/route";function m(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}},46307:(e,t,r)=>{function n(e){let t=e.cookies.get("auth");if(!t)return null;try{let e=decodeURIComponent(t.value);return JSON.parse(e)}catch(e){return null}}r.d(t,{l:()=>n})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7796,3001],()=>r(97927));module.exports=n})();