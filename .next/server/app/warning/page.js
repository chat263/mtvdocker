(()=>{var e={};e.id=91,e.ids=[91],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6005:e=>{"use strict";e.exports=require("node:crypto")},139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(11853),r(83421),r(85673);var s=r(41118),n=r(20515),i=r(17412),a=r.n(i),o=r(35078),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["warning",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,11853)),"/app/src/app/warning/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83421)),"/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,85673,23)),"next/dist/client/components/not-found-error"]}],d=["/app/src/app/warning/page.tsx"],m="/warning/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/warning/page",pathname:"/warning",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},52234:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,19400,23)),Promise.resolve().then(r.t.bind(r,74837,23)),Promise.resolve().then(r.t.bind(r,34382,23)),Promise.resolve().then(r.t.bind(r,39636,23)),Promise.resolve().then(r.t.bind(r,53572,23)),Promise.resolve().then(r.t.bind(r,14304,23))},15622:(e,t,r)=>{Promise.resolve().then(r.bind(r,76563)),Promise.resolve().then(r.bind(r,72687)),Promise.resolve().then(r.bind(r,9552))},76350:()=>{},76563:(e,t,r)=>{"use strict";r.d(t,{GlobalErrorIndicator:()=>i});var s=r(19681),n=r(73301);function i(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1);return r&&e?s.jsx("div",{className:"fixed top-4 right-4 z-[2000]",children:(0,s.jsxs)("div",{className:`bg-red-500 text-white px-4 py-3 rounded-lg shadow-lg flex items-center justify-between min-w-[300px] max-w-[400px] transition-all duration-300 ${a?"scale-105 bg-red-400":"scale-100 bg-red-500"} animate-fade-in`,children:[s.jsx("span",{className:"text-sm font-medium flex-1 mr-3",children:e.message}),s.jsx("button",{onClick:()=>{i(!1),t(null),o(!1)},className:"text-white hover:text-red-100 transition-colors flex-shrink-0","aria-label":"关闭错误提示",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}},72687:(e,t,r)=>{"use strict";r.d(t,{SiteProvider:()=>o,W:()=>a});var s=r(19681),n=r(73301);let i=(0,n.createContext)({siteName:"MoonTV",announcement:"本网站仅提供影视信息搜索服务，所有内容均来自第三方网站。本站不存储任何视频资源，不对任何内容的准确性、合法性、完整性负责。"}),a=()=>(0,n.useContext)(i);function o({children:e,siteName:t,announcement:r}){return s.jsx(i.Provider,{value:{siteName:t,announcement:r},children:e})}},9552:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>i});var s=r(19681),n=r(66081);function i({children:e,...t}){return s.jsx(n.f,{attribute:"class",defaultTheme:"system",enableSystem:!0,...t,children:e})}r(73301)},83421:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,dynamic:()=>m,generateMetadata:()=>p,viewport:()=>u});var s=r(43844),n=r(39514),i=r.n(n);r(75552),r(40516);var a=r(13303),o=r(15761);let l=(0,o.createProxy)(String.raw`/app/src/components/GlobalErrorIndicator.tsx#GlobalErrorIndicator`);(0,o.createProxy)(String.raw`/app/src/components/GlobalErrorIndicator.tsx#triggerGlobalError`),(0,o.createProxy)(String.raw`/app/src/components/SiteProvider.tsx#useSite`);let c=(0,o.createProxy)(String.raw`/app/src/components/SiteProvider.tsx#SiteProvider`),d=(0,o.createProxy)(String.raw`/app/src/components/ThemeProvider.tsx#ThemeProvider`),m="force-dynamic";async function p(){let e=process.env.NEXT_PUBLIC_STORAGE_TYPE||"localstorage",t=await (0,a.iE)(),r=process.env.NEXT_PUBLIC_SITE_NAME||"MoonTV";return"localstorage"!==e&&(r=t.SiteConfig.SiteName),{title:r,description:"影视聚合",manifest:"/manifest.json"}}let u={viewportFit:"cover"};async function x({children:e}){let t=process.env.NEXT_PUBLIC_STORAGE_TYPE||"localstorage",r=process.env.NEXT_PUBLIC_SITE_NAME||"MoonTV",n=process.env.ANNOUNCEMENT||"本网站仅提供影视信息搜索服务，所有内容均来自第三方网站。本站不存储任何视频资源，不对任何内容的准确性、合法性、完整性负责。",o="true"===process.env.NEXT_PUBLIC_ENABLE_REGISTER,m=process.env.NEXT_PUBLIC_DOUBAN_PROXY_TYPE||"direct",p=process.env.NEXT_PUBLIC_DOUBAN_PROXY||"",u=process.env.NEXT_PUBLIC_DOUBAN_IMAGE_PROXY_TYPE||"direct",x=process.env.NEXT_PUBLIC_DOUBAN_IMAGE_PROXY||"",g="true"===process.env.NEXT_PUBLIC_DISABLE_YELLOW_FILTER,h=[];if("localstorage"!==t){let e=await (0,a.iE)();r=e.SiteConfig.SiteName,n=e.SiteConfig.Announcement,o=e.UserConfig.AllowRegister,m=e.SiteConfig.DoubanProxyType,p=e.SiteConfig.DoubanProxy,u=e.SiteConfig.DoubanImageProxyType,x=e.SiteConfig.DoubanImageProxy,g=e.SiteConfig.DisableYellowFilter,h=e.CustomCategories.filter(e=>!e.disabled).map(e=>({name:e.name||"",type:e.type,query:e.query}))}let f={STORAGE_TYPE:process.env.NEXT_PUBLIC_STORAGE_TYPE||"localstorage",ENABLE_REGISTER:o,DOUBAN_PROXY_TYPE:m,DOUBAN_PROXY:p,DOUBAN_IMAGE_PROXY_TYPE:u,DOUBAN_IMAGE_PROXY:x,DISABLE_YELLOW_FILTER:g,CUSTOM_CATEGORIES:h};return(0,s.jsxs)("html",{lang:"zh-CN",suppressHydrationWarning:!0,children:[(0,s.jsxs)("head",{children:[s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),s.jsx("link",{rel:"apple-touch-icon",href:"/icons/icon-192x192.png"}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`window.RUNTIME_CONFIG = ${JSON.stringify(f)};`}})]}),s.jsx("body",{className:`${i().className} min-h-screen bg-white text-gray-900 dark:bg-black dark:text-gray-200`,children:s.jsx(d,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,s.jsxs)(c,{siteName:r,announcement:n,children:[e,s.jsx(l,{})]})})})]})}},11853:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>n});var s=r(43844);let n={title:"安全警告 - MoonTV",description:"站点安全配置警告"};function i(){return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-4 sm:p-8 border border-red-200",children:[s.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,s.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"安全合规配置警告"}),s.jsx("div",{className:"w-12 sm:w-16 h-1 bg-red-500 mx-auto rounded-full"})]}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 text-gray-700",children:[(0,s.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 p-3 sm:p-4 rounded-r-lg",children:[s.jsx("p",{className:"text-base sm:text-lg font-semibold text-red-800 mb-2",children:"⚠️ 安全风险提示"}),s.jsx("p",{className:"text-sm sm:text-base text-red-700",children:"检测到您的站点未配置访问控制，存在潜在的安全风险和法律合规问题。"})]}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"主要风险"}),(0,s.jsxs)("ul",{className:"space-y-2 sm:space-y-3 text-sm sm:text-base text-gray-600",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-red-500 mr-2 mt-0.5",children:"•"}),s.jsx("span",{children:"未经授权的访问可能导致内容被恶意传播"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-red-500 mr-2 mt-0.5",children:"•"}),s.jsx("span",{children:"服务器资源可能被滥用，影响正常服务"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-red-500 mr-2 mt-0.5",children:"•"}),s.jsx("span",{children:"可能收到相关权利方的法律通知"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-red-500 mr-2 mt-0.5",children:"•"}),s.jsx("span",{children:"服务提供商可能因合规问题终止服务"})]})]})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 sm:p-4",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-yellow-800 mb-2",children:"\uD83D\uDD12 安全配置建议"}),(0,s.jsxs)("p",{className:"text-sm sm:text-base text-yellow-700",children:["请立即配置"," ",s.jsx("code",{className:"bg-yellow-100 px-1.5 py-0.5 rounded text-xs sm:text-sm font-mono",children:"PASSWORD"})," ","环境变量以启用访问控制。"]})]})]}),s.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200",children:s.jsx("div",{className:"text-center text-xs sm:text-sm text-gray-500",children:s.jsx("p",{children:"为确保系统安全性和合规性，请及时完成安全配置"})})})]})})}},13303:(e,t,r)=>{"use strict";let s;r.d(t,{Hz:()=>i,Ih:()=>c,iE:()=>l,jT:()=>d,ll:()=>m,mL:()=>a});var n=r(35737);let i={search:{path:"?ac=videolist&wd=",pagePath:"?ac=videolist&wd={query}&pg={page}",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"application/json"}},detail:{path:"?ac=videolist&ids=",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"application/json"}}};function a(e){let t;try{t=JSON.parse(e.ConfigFile)}catch(e){t={}}let r=Object.entries(t.api_site||[]),s=new Map((e.SourceConfig||[]).map(e=>[e.key,e]));r.forEach(([e,t])=>{let r=s.get(e);r?(r.name=t.name,r.api=t.api,r.detail=t.detail,r.from="config"):s.set(e,{key:e,name:t.name,api:t.api,detail:t.detail,from:"config",disabled:!1})});let n=new Set(r.map(([e])=>e));s.forEach(e=>{n.has(e.key)||(e.from="custom")}),e.SourceConfig=Array.from(s.values());let i=t.custom_category||[],a=new Map((e.CustomCategories||[]).map(e=>[e.query+e.type,e]));i.forEach(e=>{let t=e.query+e.type,r=a.get(t);r?(r.name=e.name,r.query=e.query,r.type=e.type,r.from="config"):a.set(t,{name:e.name,type:e.type,query:e.query,from:"config",disabled:!1})});let o=new Set(i.map(e=>e.query+e.type));return a.forEach(e=>{o.has(e.query+e.type)||(e.from="custom")}),e.CustomCategories=Array.from(a.values()),e}async function o(e,t={URL:"",AutoUpdate:!1,LastCheck:""}){let r;try{r=JSON.parse(e)}catch(e){r={}}let s={ConfigFile:e,ConfigSubscribtion:t,SiteConfig:{SiteName:process.env.NEXT_PUBLIC_SITE_NAME||"MoonTV",Announcement:process.env.ANNOUNCEMENT||"本网站仅提供影视信息搜索服务，所有内容均来自第三方网站。本站不存储任何视频资源，不对任何内容的准确性、合法性、完整性负责。",SearchDownstreamMaxPage:Number(process.env.NEXT_PUBLIC_SEARCH_MAX_PAGE)||5,SiteInterfaceCacheTime:r.cache_time||7200,DoubanProxyType:process.env.NEXT_PUBLIC_DOUBAN_PROXY_TYPE||"direct",DoubanProxy:process.env.NEXT_PUBLIC_DOUBAN_PROXY||"",DoubanImageProxyType:process.env.NEXT_PUBLIC_DOUBAN_IMAGE_PROXY_TYPE||"direct",DoubanImageProxy:process.env.NEXT_PUBLIC_DOUBAN_IMAGE_PROXY||"",DisableYellowFilter:"true"===process.env.NEXT_PUBLIC_DISABLE_YELLOW_FILTER},UserConfig:{AllowRegister:"true"===process.env.NEXT_PUBLIC_ENABLE_REGISTER,Users:[]},SourceConfig:[],CustomCategories:[]},i=(0,n.cF)(),a=[];if(i&&"function"==typeof i.getAllUsers)try{a=await i.getAllUsers()}catch(e){console.error("获取用户列表失败:",e)}let o=a.filter(e=>e!==process.env.USERNAME).map(e=>({username:e,role:"user",banned:!1}));return o.unshift({username:process.env.USERNAME,role:"owner",banned:!1}),s.UserConfig.Users=o,Object.entries(r.api_site||[]).forEach(([e,t])=>{s.SourceConfig.push({key:e,name:t.name,api:t.api,detail:t.detail,from:"config",disabled:!1})}),r.custom_category?.forEach(e=>{s.CustomCategories.push({name:e.name||e.query,type:e.type,query:e.query,from:"config",disabled:!1})}),s}async function l(){if(s)return s;let e=(0,n.cF)(),t=null;return e&&"function"==typeof e.getAdminConfig&&(t=await e.getAdminConfig()),t||(t=await o("")),s=t}async function c(){let e;let t=(0,n.cF)();e=t&&"function"==typeof t.getAdminConfig?await t.getAdminConfig():{};let r=await o(e.ConfigFile,e.ConfigSubscribtion);s=r,t&&"function"==typeof t.setAdminConfig&&await t.setAdminConfig(r)}async function d(){return(await l()).SiteConfig.SiteInterfaceCacheTime||7200}async function m(){return(await l()).SourceConfig.filter(e=>!e.disabled).map(e=>({key:e.key,name:e.name,api:e.api,detail:e.detail}))}},75552:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7796,9864,6981,5737],()=>r(139));module.exports=s})();