(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{4119:function(e,t,r){Promise.resolve().then(r.bind(r,3963))},3963:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(4393),n=r(4582),l=r(477),s=r(2709),o=r(1698),c=r(4908),i=r(7467),u=r(6488),d=r(4123);let m=(0,d.Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),g=(0,d.Z)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),h=(0,d.Z)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);var p=r(1349);let x={source:"all",title:"all",year:"all",yearOrder:"none"};var y=e=>{var t;let{categories:r,values:n,onChange:l}=e,[s,o]=(0,c.useState)(null),[i,u]=(0,c.useState)({x:0,y:0,width:0}),d=(0,c.useRef)({}),y=(0,c.useRef)(null),f=(0,c.useMemo)(()=>({...x,...n}),[n]),v=e=>{let t=d.current[e];if(t){let r=t.getBoundingClientRect(),a=window.innerWidth,n=r.left,l=Math.max(r.width,"title"===e?400:240),s=!1;a<768&&(s=!0,n+(l=Math.min(l,a-32))>a-16&&(n=a-l-16),n<16&&(n=16)),u({x:n,y:r.bottom,width:s?l:r.width})}},b=e=>{s===e?o(null):(o(e),v(e))},k=(e,t)=>{l({...f,[e]:t}),o(null)},w=e=>{let t=r.find(t=>t.key===e);if(!t)return"";let a=f[e];if(!a||a===x[e])return t.label;let n=t.options.find(e=>e.value===a);return(null==n?void 0:n.label)||t.label},j=e=>{let t=f[e];return!t||t===x[e]},N=(e,t)=>{var r;return(null!==(r=f[e])&&void 0!==r?r:x[e])===t};return(0,c.useEffect)(()=>{let e=()=>{s&&o(null)},t=()=>{s&&v(s)};return document.body.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",t),()=>{document.body.removeEventListener("scroll",e),window.removeEventListener("resize",t)}},[s]),(0,c.useEffect)(()=>{let e=e=>{!y.current||y.current.contains(e.target)||Object.values(d.current).some(t=>t&&t.contains(e.target))||o(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative inline-flex rounded-full p-0.5 sm:p-1 bg-transparent gap-1 sm:gap-2",children:[r.map(e=>(0,a.jsx)("div",{ref:t=>{d.current[e.key]=t},className:"relative",children:(0,a.jsxs)("button",{onClick:()=>b(e.key),className:"relative z-10 px-1.5 py-0.5 sm:px-2 sm:py-1 md:px-4 md:py-2 text-xs sm:text-sm font-medium rounded-full transition-all duration-200 whitespace-nowrap ".concat(s===e.key?j(e.key)?"text-gray-900 dark:text-gray-100 cursor-default":"text-green-600 dark:text-green-400 cursor-default":j(e.key)?"text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 cursor-pointer":"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 cursor-pointer"),children:[(0,a.jsx)("span",{children:w(e.key)}),(0,a.jsx)("svg",{className:"inline-block w-2.5 h-2.5 sm:w-3 sm:h-3 ml-0.5 sm:ml-1 transition-transform duration-200 ".concat(s===e.key?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},e.key)),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("button",{onClick:()=>{let e;switch(f.yearOrder){case"none":default:e="desc";break;case"desc":e="asc";break;case"asc":e="none"}l({...f,yearOrder:e})},className:"relative z-10 px-1.5 py-0.5 sm:px-2 sm:py-1 md:px-4 md:py-2 text-xs sm:text-sm font-medium rounded-full transition-all duration-200 whitespace-nowrap ".concat("none"===f.yearOrder?"text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 cursor-pointer":"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 cursor-pointer"),"aria-label":"按年份".concat("none"===f.yearOrder?"排序":"desc"===f.yearOrder?"降序":"升序","排序"),children:[(0,a.jsx)("span",{children:"年份"}),"none"===f.yearOrder?(0,a.jsx)(m,{className:"inline-block ml-1 w-4 h-4 sm:w-4 sm:h-4"}):"desc"===f.yearOrder?(0,a.jsx)(g,{className:"inline-block ml-1 w-4 h-4 sm:w-4 sm:h-4"}):(0,a.jsx)(h,{className:"inline-block ml-1 w-4 h-4 sm:w-4 sm:h-4"})]})})]}),s&&(0,p.createPortal)((0,a.jsx)("div",{ref:y,className:"fixed z-[9999] bg-white/95 dark:bg-gray-800/95 rounded-xl border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm max-h-[50vh] flex flex-col",style:{left:"".concat(i.x,"px"),top:"".concat(i.y,"px"),...window.innerWidth<768?{width:"".concat(i.width,"px")}:{minWidth:"".concat(Math.max(i.width,"title"===s?400:240),"px")},maxWidth:"600px",position:"fixed"},children:(0,a.jsx)("div",{className:"p-2 sm:p-4 overflow-y-auto flex-1 min-h-0",children:(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-1 sm:gap-2",children:null===(t=r.find(e=>e.key===s))||void 0===t?void 0:t.options.map(e=>(0,a.jsx)("button",{onClick:()=>k(s,e.value),className:"px-2 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm rounded-lg transition-all duration-200 text-left ".concat(N(s,e.value)?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-700":"text-gray-700 dark:text-gray-300 hover:bg-gray-100/80 dark:hover:bg-gray-700/80"),children:e.label},e.value))})})}),document.body)]})};function f(e){let{query:t,isVisible:r,onSelect:n,onClose:l}=e,[s,o]=(0,c.useState)([]),i=(0,c.useRef)(null),u=(0,c.useRef)(null),d=(0,c.useRef)(null),m=(0,c.useCallback)(async e=>{d.current&&d.current.abort();let t=new AbortController;d.current=t;try{let r=await fetch("/api/search/suggestions?q=".concat(encodeURIComponent(e)),{signal:t.signal});if(r.ok){let e=(await r.json()).suggestions.map(e=>({text:e.text,type:"related"}));o(e)}}catch(e){e instanceof Error?"AbortError"!==e.name&&o([]):o([])}},[]),g=(0,c.useCallback)(e=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{e.trim()&&r?m(e):o([])},300)},[r,m]);return((0,c.useEffect)(()=>{if(!t.trim()||!r){o([]);return}return g(t),()=>{u.current&&clearTimeout(u.current)}},[t,r,g]),(0,c.useEffect)(()=>{let e=e=>{i.current&&!i.current.contains(e.target)&&l()};return r&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r,l]),r&&0!==s.length)?(0,a.jsx)("div",{ref:i,className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-80 overflow-y-auto",children:s.map(e=>(0,a.jsx)("button",{onClick:()=>n(e.text),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150 flex items-center gap-3",children:(0,a.jsx)("span",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300 truncate",children:e.text})},"related-".concat(e.text)))}):null}var v=r(6501);function b(){let[e,t]=(0,c.useState)([]),[r,d]=(0,c.useState)(!1),m=(0,o.useRouter)(),g=(0,o.useSearchParams)(),h=(0,c.useRef)(""),[p,x]=(0,c.useState)(""),[b,k]=(0,c.useState)(!1),[w,j]=(0,c.useState)(!1),[N,S]=(0,c.useState)([]),[C,E]=(0,c.useState)(!1),M=(0,c.useRef)(null),[_,R]=(0,c.useState)(0),[I,O]=(0,c.useState)(0),A=(0,c.useRef)([]),q=(0,c.useRef)(null),[T,L]=(0,c.useState)(!0),U=(0,c.useRef)(new Map),Z=(0,c.useRef)(new Map),F=e=>{let t=U.current.get(e);return t||(t=c.createRef(),U.current.set(e,t)),t},z=e=>({episodes:(()=>{let t=new Map;e.forEach(e=>{var r;let a=(null===(r=e.episodes)||void 0===r?void 0:r.length)||0;a>0&&t.set(a,(t.get(a)||0)+1)});let r=0,a=0;return t.forEach((e,t)=>{e>r&&(r=e,a=t)}),a})(),source_names:Array.from(new Set(e.map(e=>e.source_name).filter(Boolean)))}),[W,D]=(0,c.useState)({source:"all",title:"all",year:"all",yearOrder:"none"}),[P,B]=(0,c.useState)({source:"all",title:"all",year:"all",yearOrder:"none"}),J=()=>{{let e=localStorage.getItem("defaultAggregateSearch");if(null!==e)return JSON.parse(e)}return!0},[H,V]=(0,c.useState)(()=>J()?"agg":"all"),G=e=>{let t=h.current.trim();return e.slice().sort((e,r)=>{let a=(e.title||"").trim()===t,n=(r.title||"").trim()===t;if(a&&!n)return -1;if(!a&&n)return 1;let l=Number.parseInt(e.year,10),s=Number.parseInt(r.year,10),o=!Number.isNaN(l),c=!Number.isNaN(s);return o&&!c?-1:!o&&c?1:o&&c?s-l:0})},K=(e,t,r)=>{if("none"===r)return 0;let a=!e||"unknown"===e,n=!t||"unknown"===t;if(a&&n)return 0;if(a)return 1;if(n)return -1;let l=parseInt(e,10),s=parseInt(t,10);return"asc"===r?l-s:s-l},Q=(0,c.useMemo)(()=>{let e=new Map,t=[];return N.forEach(r=>{let a="".concat(r.title.replaceAll(" ",""),"-").concat(r.year||"unknown","-").concat(1===r.episodes.length?"movie":"tv"),n=e.get(a)||[];0===n.length&&t.push(a),n.push(r),e.set(a,n)}),t.map(t=>[t,e.get(t)])},[N]);(0,c.useEffect)(()=>{Q.forEach(e=>{let[t,r]=e,a=z(r),n=Z.current.get(t);if(!n){Z.current.set(t,a);return}let l=U.current.get(t);l&&l.current&&(n.episodes!==a.episodes&&l.current.setEpisodes(a.episodes),(n.source_names||[]).join("|")!==(a.source_names||[]).join("|")&&l.current.setSourceNames(a.source_names),Z.current.set(t,a))})},[Q]);let X=(0,c.useMemo)(()=>{let e=new Map,t=new Set,r=new Set;N.forEach(a=>{a.source&&a.source_name&&e.set(a.source,a.source_name),a.title&&t.add(a.title),a.year&&r.add(a.year)});let a=[{label:"全部来源",value:"all"},...Array.from(e.entries()).sort((e,t)=>e[1].localeCompare(t[1])).map(e=>{let[t,r]=e;return{label:r,value:t}})],n=[{label:"全部标题",value:"all"},...Array.from(t.values()).sort((e,t)=>e.localeCompare(t)).map(e=>({label:e,value:e}))],l=Array.from(r.values()),s=l.filter(e=>"unknown"!==e).sort((e,t)=>parseInt(t)-parseInt(e)),o=l.includes("unknown"),c=[{label:"全部年份",value:"all"},...s.map(e=>({label:e,value:e})),...o?[{label:"未知",value:"unknown"}]:[]];return{categoriesAll:[{key:"source",label:"来源",options:a},{key:"title",label:"标题",options:n},{key:"year",label:"年份",options:c}],categoriesAgg:[{key:"source",label:"来源",options:a},{key:"title",label:"标题",options:n},{key:"year",label:"年份",options:c}]}},[N]),Y=(0,c.useMemo)(()=>{let{source:e,title:t,year:r,yearOrder:a}=W,n=N.filter(a=>("all"===e||a.source===e)&&("all"===t||a.title===t)&&("all"===r||a.year===r));return"none"===a?n:n.sort((e,t)=>{let r=K(e.year,t.year,a);if(0!==r)return r;let n=e.title===p.trim(),l=t.title===p.trim();return n&&!l?-1:!n&&l?1:"asc"===a?e.title.localeCompare(t.title):t.title.localeCompare(e.title)})},[N,W,p]),$=(0,c.useMemo)(()=>{let{source:e,title:t,year:r,yearOrder:a}=P,n=Q.filter(a=>{var n,l,s,o;let[c,i]=a,u=null!==(s=null===(n=i[0])||void 0===n?void 0:n.title)&&void 0!==s?s:"",d=null!==(o=null===(l=i[0])||void 0===l?void 0:l.year)&&void 0!==o?o:"unknown";return!!("all"===e||i.some(t=>t.source===e))&&("all"===t||u===t)&&("all"===r||d===r)});return"none"===a?n:n.sort((e,t)=>{let r=K(e[1][0].year,t[1][0].year,a);if(0!==r)return r;let n=e[1][0].title===p.trim(),l=t[1][0].title===p.trim();if(n&&!l)return -1;if(!n&&l)return 1;let s=e[1][0].title,o=t[1][0].title;return"asc"===a?s.localeCompare(o):o.localeCompare(s)})},[Q,P,p]);return(0,c.useEffect)(()=>{var e,r;g.get("q")||null===(e=document.getElementById("searchInput"))||void 0===e||e.focus(),(0,i.nO)().then(t);{let e=localStorage.getItem("fluidSearch"),t=(null===(r=window.RUNTIME_CONFIG)||void 0===r?void 0:r.FLUID_SEARCH)!==!1;null!==e?L(JSON.parse(e)):void 0!==t&&L(t)}let a=(0,i.rq)("searchHistoryUpdated",e=>{t(e)}),n=()=>document.body.scrollTop||0,l=!1,s=()=>{l&&(d(n()>300),requestAnimationFrame(s))};l=!0,s();let o=()=>{d(n()>300)};return document.body.addEventListener("scroll",o,{passive:!0}),()=>{a(),l=!1,document.body.removeEventListener("scroll",o)}},[]),(0,c.useEffect)(()=>{let e=g.get("q")||"";if(h.current=e.trim(),e){if(x(e),M.current){try{M.current.close()}catch(e){}M.current=null}S([]),R(0),O(0),A.current=[],q.current&&(clearTimeout(q.current),q.current=null),k(!0),j(!0);let r=e.trim(),a=T;{let e=localStorage.getItem("fluidSearch");if(null!==e)a=JSON.parse(e);else{var t;a=(null===(t=window.RUNTIME_CONFIG)||void 0===t?void 0:t.FLUID_SEARCH)!==!1}}if(a!==T&&L(a),a){let e=new EventSource("/api/search/ws?q=".concat(encodeURIComponent(r)));M.current=e,e.onmessage=t=>{if(t.data)try{let a=JSON.parse(t.data);if(h.current!==r)return;switch(a.type){case"start":R(a.totalSources||0),O(0);break;case"source_result":if(O(e=>e+1),Array.isArray(a.results)&&a.results.length>0){let e="agg"===H?P.yearOrder:W.yearOrder,t="none"===e?G(a.results):a.results;A.current.push(...t),q.current||(q.current=window.setTimeout(()=>{let e=A.current;A.current=[],(0,c.startTransition)(()=>{S(t=>t.concat(e))}),q.current=null},80))}break;case"source_error":O(e=>e+1);break;case"complete":if(O(a.completedSources||_),A.current.length>0){let e=A.current;A.current=[],q.current&&(clearTimeout(q.current),q.current=null),(0,c.startTransition)(()=>{S(t=>t.concat(e))})}k(!1);try{e.close()}catch(e){}M.current===e&&(M.current=null)}}catch(e){}},e.onerror=()=>{if(k(!1),A.current.length>0){let e=A.current;A.current=[],q.current&&(clearTimeout(q.current),q.current=null),(0,c.startTransition)(()=>{S(t=>t.concat(e))})}try{e.close()}catch(e){}M.current===e&&(M.current=null)}}else fetch("/api/search?q=".concat(encodeURIComponent(r))).then(e=>e.json()).then(e=>{h.current===r&&(e.results&&Array.isArray(e.results)&&(S("none"===("agg"===H?P.yearOrder:W.yearOrder)?G(e.results):e.results),R(1),O(1)),k(!1))}).catch(()=>{k(!1)});E(!1),(0,i.F0)(e)}else j(!1),E(!1)},[g]),(0,c.useEffect)(()=>()=>{if(M.current){try{M.current.close()}catch(e){}M.current=null}q.current&&(clearTimeout(q.current),q.current=null),A.current=[]},[]),(0,a.jsxs)(u.Z,{activePath:"/search",children:[(0,a.jsxs)("div",{className:"px-4 sm:px-10 py-4 sm:py-8 overflow-visible mb-10",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault();let t=p.trim().replace(/\s+/g," ");t&&(x(t),k(!0),j(!0),E(!1),m.push("/search?q=".concat(encodeURIComponent(t))))},className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400 dark:text-gray-500"}),(0,a.jsx)("input",{id:"searchInput",type:"text",value:p,onChange:e=>{let t=e.target.value;x(t),t.trim()?E(!0):E(!1)},onFocus:()=>{p.trim()&&E(!0)},placeholder:"搜索电影、电视剧...",className:"w-full h-12 rounded-lg bg-gray-50/80 py-3 pl-10 pr-4 text-sm text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400 focus:bg-white border border-gray-200/50 shadow-sm dark:bg-gray-800 dark:text-gray-300 dark:placeholder-gray-500 dark:focus:bg-gray-700 dark:border-gray-700"}),(0,a.jsx)(f,{query:p,isVisible:C,onSelect:e=>{x(e),E(!1),k(!0),j(!0),m.push("/search?q=".concat(encodeURIComponent(e)))},onClose:()=>E(!1)})]})})}),(0,a.jsx)("div",{className:"max-w-[95%] mx-auto mt-12 overflow-visible",children:w?(0,a.jsxs)("section",{className:"mb-12",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:["搜索结果",N.length>0&&_>0&&T&&(0,a.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:[I,"/",_]}),N.length>0&&b&&T&&(0,a.jsx)("span",{className:"ml-2 inline-block align-middle",children:(0,a.jsx)("span",{className:"inline-block h-3 w-3 border-2 border-gray-300 border-t-green-500 rounded-full animate-spin"})})]})}),(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between gap-3",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:"agg"===H?(0,a.jsx)(y,{categories:X.categoriesAgg,values:P,onChange:e=>B(e)}):(0,a.jsx)(y,{categories:X.categoriesAll,values:W,onChange:e=>D(e)})}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer select-none shrink-0",children:[(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300",children:"聚合"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:"agg"===H,onChange:()=>V("agg"===H?"all":"agg")}),(0,a.jsx)("div",{className:"w-9 h-5 bg-gray-300 rounded-full peer-checked:bg-green-500 transition-colors dark:bg-gray-600"}),(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-4"})]})]})]}),0===N.length?b?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):(0,a.jsx)("div",{className:"text-center text-gray-500 py-8 dark:text-gray-400",children:"未找到相关结果"}):(0,a.jsx)("div",{className:"justify-start grid grid-cols-3 gap-x-2 gap-y-14 sm:gap-y-20 px-0 sm:px-2 sm:grid-cols-[repeat(auto-fill,_minmax(11rem,_1fr))] sm:gap-x-8",children:"agg"===H?$.map(e=>{var t,r,n;let[l,s]=e,o=(null===(t=s[0])||void 0===t?void 0:t.title)||"",c=(null===(r=s[0])||void 0===r?void 0:r.poster)||"",i=(null===(n=s[0])||void 0===n?void 0:n.year)||"unknown",{episodes:u,source_names:d}=z(s),m=1===u?"movie":"tv";return Z.current.has(l)||Z.current.set(l,{episodes:u,source_names:d}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(v.Z,{ref:F(l),from:"search",isAggregate:!0,title:o,poster:c,year:i,episodes:u,source_names:d,query:p.trim()!==o?p.trim():"",type:m})},"agg-".concat(l))}):Y.map(e=>(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(v.Z,{id:e.id,title:e.title,poster:e.poster,episodes:e.episodes.length,source:e.source,source_name:e.source_name,douban_id:e.douban_id,query:p.trim()!==e.title?p.trim():"",year:e.year,from:"search",type:e.episodes.length>1?"tv":"movie"})},"all-".concat(e.source,"-").concat(e.id)))},"search-results-".concat(H))]}):e.length>0?(0,a.jsxs)("section",{className:"mb-12",children:[(0,a.jsxs)("h2",{className:"mb-4 text-xl font-bold text-gray-800 text-left dark:text-gray-200",children:["搜索历史",e.length>0&&(0,a.jsx)("button",{onClick:()=>{(0,i.Ev)()},className:"ml-3 text-sm text-gray-500 hover:text-red-500 transition-colors dark:text-gray-400 dark:hover:text-red-500",children:"清空"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{onClick:()=>{x(e),m.push("/search?q=".concat(encodeURIComponent(e.trim())))},className:"px-4 py-2 bg-gray-500/10 hover:bg-gray-300 rounded-full text-sm text-gray-700 transition-colors duration-200 dark:bg-gray-700/50 dark:hover:bg-gray-600 dark:text-gray-300",children:e}),(0,a.jsx)("button",{"aria-label":"删除搜索历史",onClick:t=>{t.stopPropagation(),t.preventDefault(),(0,i.Rw)(e)},className:"absolute -top-1 -right-1 w-4 h-4 opacity-0 group-hover:opacity-100 bg-gray-400 hover:bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] transition-colors",children:(0,a.jsx)(l.Z,{className:"w-3 h-3"})})]},e))})]}):null})]}),(0,a.jsx)("button",{onClick:()=>{try{document.body.scrollTo({top:0,behavior:"smooth"})}catch(e){document.body.scrollTop=0}},className:"fixed bottom-20 md:bottom-6 right-6 z-[500] w-12 h-12 bg-green-500/90 hover:bg-green-500 text-white rounded-full shadow-lg backdrop-blur-sm transition-all duration-300 ease-in-out flex items-center justify-center group ".concat(r?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 translate-y-4 pointer-events-none"),"aria-label":"返回顶部",children:(0,a.jsx)(s.Z,{className:"w-6 h-6 transition-transform group-hover:scale-110"})})]})}function k(){return(0,a.jsx)(c.Suspense,{children:(0,a.jsx)(b,{})})}}},function(e){e.O(0,[447,816,238,918,488,78,501,541,242,744],function(){return e(e.s=4119)}),_N_E=e.O()}]);